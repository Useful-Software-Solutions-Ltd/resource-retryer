!function(){"use strict";function e(e,n,o){function i(r,t,n,o){if(o&&o.retry){var i=angular.extend({},f,o.retry);a(i);var c=e(r,t,n,o),l=n?u.concat(Object.getOwnPropertyNames(n)):u;return s(c,l,i),c}return e(r,t,n,o)}function s(e,r,t){if(r)r.forEach(function(r){c(e,r,t)});else for(var a in e)e.hasOwnProperty(a)||"$"!==a.charAt(0)||c(e,a,t)}function c(e,a,i){function c(c,l,g,m){function p(){function r(r,t){if(angular.isArray(r))r.forEach(function(e,r){s(e,null,i),-1===y.indexOf(e)&&y.push(e)});else if(r!==y)for(var a in r)y[a]=r[a];d.resolve(y),v.onResolve&&v.onResolve.apply(e,[y,t])}function n(r,t){f<i.retries?(f+=1,angular.isFunction(i.retryCallback)&&i.retryCallback(r,f,l),o(function(){p()},l)):(angular.copy(r,y),d.reject(y),v.onReject&&v.onReject.apply(e,[y,t]))}var c,l=t(i,f);c=u.apply(e,v.args.concat([r,n])),"$"===a.charAt(0)?y=d.promise:y||(s(c,null,i),c.$promise=d.promise,y=c)}var y,v=r(a,arguments),d=n.defer();return p(),y}var u=e[a],f=0;e.hasOwnProperty(a)?e[a]=c:Object.getPrototypeOf(e)[a]=c}var u=["get","save","query","remove","delete"],f={strategy:"progressiveBackSOff",minWait:50,maxWait:500,retries:5,base:2,startSequenceAfter:1};return i}function r(e,r){var t,a,n,o=/^(POST|PUT|PATCH)$/i.test(e),i={},s={};switch(r.length){case 4:a=r[3],n=r[2];case 3:case 2:if(!angular.isFunction(r[1])){i=r[0],t=r[1],n=r[2];break}if(angular.isFunction(r[0])){n=r[0],a=r[1];break}n=r[1],a=r[2];case 1:angular.isFunction(r[0])?n=r[0]:o?t=r[0]:i=r[0];break;case 0:break;default:throw{code:"badargs",message:"Expected up to 4 arguments [params, data, success, error], got {0} arguments"+r.length}}return s.onResolve=angular.isFunction(n)?n:null,s.onReject=angular.isFunction(a)?a:null,s.args=[i],t&&s.args.push(t),s}function t(e,r){if("custom"===e.strategy)return e.delayCalculator(e,r);if("randomizedRetry"===e.strategy)return Math.floor(Math.random()*(e.maxWait-e.minWait+1))+e.minWait;if("progressiveBackOff"===e.strategy){var t=r+(e.startSequenceAfter-1),a=Math.pow(e.base,t);return a<e.minWait?e.minWait:a>e.maxWait?e.maxWait:a}}function a(e){if(e.strategy&&o.indexOf(e.strategy)<0)throw{name:"error",message:"Unknown retry approach. Acceptable options are: "+o.toString()}}var n=angular.module("resourceRetryer",["ngResource"]),o=["randomizedRetry","progressiveBackOff","custom"];n.config(["$provide",function(r){r.decorator("$resource",["$delegate","$q","$timeout",e])}])}();